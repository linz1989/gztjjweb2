$(function(){function a(a,n,i){$.get("/articleServlet",{opeType:"queryArticleListByCategory",category:"zt"+e.id,searchKeyWords:"",start:a,length:t,lineWordsNum:400,isPublic:"1",refresh:(new Date).getTime()},function(a,r){if("success"==r){for(var l="",c=0;c<a.data.length;c++)l+='<li><a href="article.html?id='+a.data[c].id+"&sid="+e.id+"&sname="+encodeURIComponent(e.name)+'" title="'+a.data[c].title+'">'+a.data[c].title+"</a><span>"+a.data[c].publishTime.slice(0,-3)+"</span></li>";""==l&&(l="<li style='text-align: left'>没有查询到记录！</li>",$("#listContainer>div.foot").hide()),i.listContainer.html(l);var o=parseInt(a.recordsTotal/t,10);a.recordsTotal%t!=0&&(o+=1),i.totalPageInput.val(o),i.currPageInput.val(n),i.currPageNumInput.val(a.data.length),0==a.recordsTotal?(i.firstPageLink.hide(),i.prevPageLink.hide(),i.nextPageLink.hide(),i.lastPageLink.hide()):(i.totalPageSpan.text(o),i.totalRecordSpan.text(a.recordsTotal),i.currPageSpan.text(n),1==n?(i.firstPageLink.hide(),i.prevPageLink.hide()):(i.firstPageLink.show(),i.prevPageLink.show()),n==o?(i.nextPageLink.hide(),i.lastPageLink.hide()):(i.nextPageLink.show(),i.lastPageLink.show()))}},"json")}var e=($(window),getParam());if(void 0==e.id||!e.name)return void(location.href="error.html");var t=20,n=$("#listContainer"),i=$("#listContainer>div.foot"),r={category:"",listContainer:n.children("ul"),totalPageInput:i.children("input.totalPage"),currPageInput:i.children("input.currPage"),currPageNumInput:i.children("input.currPageNum"),totalPageSpan:i.children("span").children("span.totalPage"),totalRecordSpan:i.children("span").children("span.totalRecord"),currPageSpan:i.children("span").children("span.currPage"),firstPageLink:i.children("a.first"),prevPageLink:i.children("a.prev"),nextPageLink:i.children("a.next"),lastPageLink:i.children("a.last")};e.name=decodeURIComponent(e.name),$("div.currPos>a.curr")[0].innerHTML+=e.name,a(0,1,r),$("#listContainer>div>a.first").click(function(){var e=r.currPageInput.val()-0;e>1&&a(0,1,r)}),$("#listContainer>div>a.prev").click(function(){var e=r.currPageInput.val()-0,t=r.currPageNumInput.val()-0;e>1&&a((e-2)*t,e-1,r)}),$("#listContainer>div>a.next").click(function(){var e=r.currPageInput.val()-0,t=r.totalPageInput.val()-0,n=r.currPageNumInput.val()-0;t>e&&a(e*n,e+1,r)}),$("#listContainer>div>a.last").click(function(){var e=r.currPageInput.val()-0,t=r.totalPageInput.val()-0,n=r.currPageNumInput.val()-0;t>e&&a((t-1)*n,t,r)})});