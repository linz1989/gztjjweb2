$(function(){function e(e,n,r){$.get("/articleServlet",{opeType:"queryArticleListByCategory",category:"",searchKeyWords:a.key,start:e,length:t,lineWordsNum:400,isPublic:"1",refresh:(new Date).getTime()},function(e,i){if("success"==i){for(var l="",c=0;c<e.data.length;c++)l+='<li><a href="article.html?id='+e.data[c].id+'" title="'+e.data[c].title+'">'+e.data[c].title.replace(new RegExp(a.key,"g"),"<span class='key'>"+a.key+"</span>")+"</a><span>"+e.data[c].publishTime.slice(0,-3)+"</span></li>";""==l&&(l="<li style='text-align: left'>没有查询到记录！</li>",$("#listContainer>div.foot").hide()),r.listContainer.html(l);var o=parseInt(e.recordsTotal/t,10);e.recordsTotal%t!=0&&(o+=1),r.totalPageInput.val(o),r.currPageInput.val(n),r.currPageNumInput.val(e.data.length),0==e.recordsTotal?(r.firstPageLink.hide(),r.prevPageLink.hide(),r.nextPageLink.hide(),r.lastPageLink.hide()):(r.totalPageSpan.text(o),r.totalRecordSpan.text(e.recordsTotal),r.currPageSpan.text(n),1==n?(r.firstPageLink.hide(),r.prevPageLink.hide()):(r.firstPageLink.show(),r.prevPageLink.show()),n==o?(r.nextPageLink.hide(),r.lastPageLink.hide()):(r.nextPageLink.show(),r.lastPageLink.show()))}},"json")}var a=($(window),getParam());if(void 0==a.key||""==a.key)return void(location.href="error.html");var t=20,n=$("#listContainer"),r=$("#listContainer>div.foot"),i={category:"",listContainer:n.children("ul"),totalPageInput:r.children("input.totalPage"),currPageInput:r.children("input.currPage"),currPageNumInput:r.children("input.currPageNum"),totalPageSpan:r.children("span").children("span.totalPage"),totalRecordSpan:r.children("span").children("span.totalRecord"),currPageSpan:r.children("span").children("span.currPage"),firstPageLink:r.children("a.first"),prevPageLink:r.children("a.prev"),nextPageLink:r.children("a.next"),lastPageLink:r.children("a.last")};a.key=decodeURIComponent(a.key),$("div.currPos>a.curr")[0].innerHTML+=a.key,e(0,1,i),$("#listContainer>div>a.first").click(function(){var a=i.currPageInput.val()-0;a>1&&e(0,1,i)}),$("#listContainer>div>a.prev").click(function(){var a=i.currPageInput.val()-0,t=i.currPageNumInput.val()-0;a>1&&e((a-2)*t,a-1,i)}),$("#listContainer>div>a.next").click(function(){var a=i.currPageInput.val()-0,t=i.totalPageInput.val()-0,n=i.currPageNumInput.val()-0;t>a&&e(a*n,a+1,i)}),$("#listContainer>div>a.last").click(function(){var a=i.currPageInput.val()-0,t=i.totalPageInput.val()-0,n=i.currPageNumInput.val()-0;t>a&&e((t-1)*n,t,i)})});